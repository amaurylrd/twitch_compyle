language: python
dist: xenial
python: "3.8"

stages:
  - lint

before_install:
  - PROJECT_DIR=$(pwd)/compyle
  - pip install --upgrade pip
  - pip install poetry

install:
  - poetry config virtualenvs.create false
  - poetry install --no-root --no-interaction --no-ansi

jobs:
  include:
    - stage: lint
      name: "Pylama"
      script:
        - poetry run pylama
    
    - stage: lint
      name: "Bandit"
      script:
        - poetry run bandit -r $PROJECT_DIR
